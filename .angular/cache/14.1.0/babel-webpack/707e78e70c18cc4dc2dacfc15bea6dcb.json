{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../services/auth.service\";\nimport * as i2 from \"./../../services/toast.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@ionic-native/safari-view-controller/ngx\";\nimport * as i6 from \"@ionic-native/in-app-browser/ngx\";\nimport * as i7 from \"@angular/common\";\n\nfunction BookingSystemPage_ion_col_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 4)(1, \"h2\");\n    i0.ɵɵtext(2, \"Mes tables disponibles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"hr\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookingSystemPage_ion_col_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-col\", 4)(1, \"h2\");\n    i0.ɵɵtext(2, \"Vous devez \\u00EAtre abonn\\u00E9 \\u00E0 la redevance mensuelle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"hr\");\n    i0.ɵɵelementStart(4, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function BookingSystemPage_ion_col_7_Template_ion_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.goToPanel());\n    });\n    i0.ɵɵtext(5, \"Dashboard\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction BookingSystemPage_ion_col_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-col\", 4)(1, \"h2\");\n    i0.ɵɵtext(2, \"Entrez un mode de paiement dans le panneau de contr\\u00F4le\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"hr\");\n    i0.ɵɵelementStart(4, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function BookingSystemPage_ion_col_8_Template_ion_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.goToPanel());\n    });\n    i0.ɵɵtext(5, \"Dashboard\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction BookingSystemPage_ion_col_10_ion_item_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 13);\n    i0.ɵɵlistener(\"click\", function BookingSystemPage_ion_col_10_ion_item_11_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.modifyBooking(ctx_r16.item));\n    });\n    i0.ɵɵelementStart(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-label\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-label\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-label\", 14);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(3, 4, ctx_r12.item.created_at, \"dd/MM/yyyy\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.item.commensals, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.item.turn_text, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.item.pending_text, \" \");\n  }\n}\n\nfunction BookingSystemPage_ion_col_10_ion_item_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 15);\n    i0.ɵɵlistener(\"click\", function BookingSystemPage_ion_col_10_ion_item_12_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.modifyBooking(ctx_r18.item));\n    });\n    i0.ɵɵelementStart(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-label\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-label\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-label\", 14);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(3, 4, ctx_r13.item.created_at, \"dd/MM/yyyy\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.item.commensals, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.item.turn_text, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.item.pending_text, \" \");\n  }\n}\n\nfunction BookingSystemPage_ion_col_10_ion_item_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 16);\n    i0.ɵɵlistener(\"click\", function BookingSystemPage_ion_col_10_ion_item_13_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.modifyBooking(ctx_r20.item));\n    });\n    i0.ɵɵelementStart(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-label\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-label\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-label\", 14);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(3, 4, ctx_r14.item.created_at, \"dd/MM/yyyy\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r14.item.commensals, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r14.item.turn_text, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r14.item.pending_text, \" \");\n  }\n}\n\nfunction BookingSystemPage_ion_col_10_ion_item_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 17);\n    i0.ɵɵlistener(\"click\", function BookingSystemPage_ion_col_10_ion_item_14_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.modifyBooking(ctx_r22.item));\n    });\n    i0.ɵɵelementStart(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-label\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-label\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-label\", 14);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(3, 4, ctx_r15.item.created_at, \"dd/MM/yyyy\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r15.item.commensals, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r15.item.turn_text, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r15.item.pending_text, \" \");\n  }\n}\n\nfunction BookingSystemPage_ion_col_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 8)(1, \"ion-list\")(2, \"ion-list-header\")(3, \"ion-label\");\n    i0.ɵɵtext(4, \"Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-label\");\n    i0.ɵɵtext(6, \"Couverts\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ion-label\");\n    i0.ɵɵtext(8, \"Services\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-label\");\n    i0.ɵɵtext(10, \"Statut\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(11, BookingSystemPage_ion_col_10_ion_item_11_Template, 10, 7, \"ion-item\", 9);\n    i0.ɵɵtemplate(12, BookingSystemPage_ion_col_10_ion_item_12_Template, 10, 7, \"ion-item\", 10);\n    i0.ɵɵtemplate(13, BookingSystemPage_ion_col_10_ion_item_13_Template, 10, 7, \"ion-item\", 11);\n    i0.ɵɵtemplate(14, BookingSystemPage_ion_col_10_ion_item_14_Template, 10, 7, \"ion-item\", 12);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.item.fechaFormat == 1 && ctx_r3.item.pending == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.item.fechaFormat == 1 && ctx_r3.item.pending == 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.item.pending == 1 && ctx_r3.item.fechaFormat == 3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.item.pending == 0 && ctx_r3.item.fechaFormat == 0);\n  }\n}\n\nfunction BookingSystemPage_ion_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-button\", 18);\n    i0.ɵɵlistener(\"click\", function BookingSystemPage_ion_button_13_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.createBooking());\n    });\n    i0.ɵɵtext(1, \"AJOUTER UNE TABLE\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookingSystemPage_ion_grid_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"ion-row\", 1)(2, \"ion-col\", 4)(3, \"h2\");\n    i0.ɵɵtext(4, \"Mes demandes de r\\u00E9servation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"hr\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction BookingSystemPage_ion_grid_15_ion_item_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 7);\n    i0.ɵɵlistener(\"click\", function BookingSystemPage_ion_grid_15_ion_item_4_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r29);\n      const item_r27 = restoredCtx.$implicit;\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r28.viewPetition(item_r27));\n    });\n    i0.ɵɵelementStart(1, \"ion-label\")(2, \"h3\")(3, \"span\", 20);\n    i0.ɵɵtext(4, \"ID TABLE:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementStart(6, \"span\", 20);\n    i0.ɵɵtext(7, \"Couverts:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"h3\")(10, \"span\", 20);\n    i0.ɵɵtext(11, \"Heure:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"h4\")(14, \"span\", 20);\n    i0.ɵɵtext(15, \"Client:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"h4\")(18, \"span\", 20);\n    i0.ɵɵtext(19, \"T\\u00E9l\\u00E9phone:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(21, \"ion-icon\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r27 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", item_r27.id_booking, \" - \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r27.commensals, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", item_r27.time_trame, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", item_r27.user.name, \" \", item_r27.user.last_name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", item_r27.user.phone_number, \"\");\n  }\n}\n\nfunction BookingSystemPage_ion_grid_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"ion-row\")(2, \"ion-col\", 8)(3, \"ion-list\");\n    i0.ɵɵtemplate(4, BookingSystemPage_ion_grid_15_ion_item_4_Template, 22, 6, \"ion-item\", 19);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.myActivePetitions);\n  }\n}\n\nfunction BookingSystemPage_ion_grid_16_ion_item_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\")(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h3\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h3\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const item_r31 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", item_r31.user.name, \" \", item_r31.user.last_name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r31.user.phone_number);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", item_r31.commensals, \" Couverts\");\n  }\n}\n\nfunction BookingSystemPage_ion_grid_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"ion-row\", 1)(2, \"ion-col\", 8)(3, \"ion-list\")(4, \"ion-list-header\")(5, \"h2\");\n    i0.ɵɵtext(6, \"Derni\\u00E8res r\\u00E9servations\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"hr\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, BookingSystemPage_ion_grid_16_ion_item_8_Template, 8, 4, \"ion-item\", 22);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.myLastBookings);\n  }\n}\n\nexport let BookingSystemPage = /*#__PURE__*/(() => {\n  class BookingSystemPage {\n    constructor(authService, toastService, alertController, router, platform, safariViewController, inAppBrowser) {\n      this.authService = authService;\n      this.toastService = toastService;\n      this.alertController = alertController;\n      this.router = router;\n      this.platform = platform;\n      this.safariViewController = safariViewController;\n      this.inAppBrowser = inAppBrowser;\n      this.postData = {\n        id_user: ''\n      };\n      this.postPetition = {\n        id_petition: ''\n      };\n    }\n\n    ngOnInit() {}\n\n    ionViewWillEnter() {\n      this.hasPaymentMethod();\n      this.getBookingsForBusinessUser();\n      this.getBookingPetitions();\n      this.getLastBookingsUserBusiness();\n    }\n\n    createBooking() {\n      var prueba = window.matchMedia('(prefers-color-scheme: white)').matches;\n      console.log('Modo oscuro? : ', prueba);\n      this.router.navigate(['home/tabs/booking-system/booking-create']);\n    }\n\n    modifyBooking(item) {\n      let navigationExtras = {\n        state: {\n          item: item\n        }\n      };\n      this.router.navigate(['home/tabs/booking-system/booking-details'], navigationExtras);\n    }\n\n    convertDateForIos(date) {\n      var arr = date.split(/[. :]/);\n      date = new Date(arr[0], arr[1] - 1, arr[2], arr[3], arr[4]);\n      var dateStr = (\"00\" + date.getDate()).slice(-2) + \"/\" + (\"00\" + (date.getMonth() + 1)).slice(-2) + \"/\" + date.getFullYear() + \" \" + (\"00\" + date.getHours()).slice(-2) + \":\" + (\"00\" + date.getMinutes()).slice(-2);\n      return dateStr;\n    }\n\n    hasPaymentMethod() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.postData.id_user = window.localStorage.getItem('id_user');\n        this.authService.hasPaymentMethod(this.postData).subscribe(res => {\n          this.havePaymentMethod = res;\n        });\n      });\n    }\n\n    getBookingPetitions() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.postData.id_user = window.localStorage.getItem('id_user');\n        this.authService.getBookingPetitions(this.postData).subscribe(res => {\n          this.myActivePetitions = res;\n\n          if (this.myActivePetitions.length == 0) {\n            this.haveActivePetitions = false;\n          } else {\n            this.haveActivePetitions = true;\n            this.myActivePetitions.forEach(element => {\n              var date = this.convertDateForIos(element.time_trame);\n              element.time_trame = date;\n            });\n          }\n        }, error => {\n          this.toastService.presentToast('Problème de réseau.');\n        });\n      });\n    }\n\n    getBookingsForBusinessUser() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.postData.id_user = window.localStorage.getItem('id_user');\n        console.log(\"Antes de obtener las reservas.\");\n        console.log(window.localStorage.getItem('id_user'));\n        this.authService.getBookingsForBusinessUser(this.postData).subscribe(res => {\n          this.myActiveBookings = res;\n          console.log(\"Antes de recorrer una reserva\");\n          this.myActiveBookings.forEach(element => {\n            var hoy = new Date(); //Fecha actual del sistema\n\n            var fechaFormateada = element.created_at;\n            var fechaHoy = hoy.toLocaleDateString(\"en-CA\");\n            var fechaFinal = fechaFormateada.slice(0, 10);\n            console.log(fechaFinal !== fechaHoy);\n            console.log(fechaFinal);\n            console.log(fechaHoy); // if (fechaFinal == fechaHoy) {\n            //   element.fechaFormat = 0;\n            // }else {\n            //   element.fechaFormat = 1;\n            //   if(element.pending == 1){\n            //     element.pending_text = \"En attente\";\n            //   }\n            // }\n\n            if (element.pending == 1 && fechaFinal == fechaHoy) {\n              element.fechaFormat = 3;\n              element.pending_text = \"En attente\";\n            } else if (element.pending == 1 && fechaFinal > fechaHoy) {\n              element.pending_text = \"Non Réservée\";\n              element.fechaFormat = 1;\n            } else if (element.pending == 0 && fechaFinal == fechaHoy) {\n              element.pending_text = \"Réservée\";\n              element.fechaFormat = 0;\n            } else {\n              element.pending_text = \"Réservée\";\n              element.fechaFormat = 1;\n            }\n\n            if (element.turns == 1) {\n              element.turn_text = \"Midi\";\n            } else {\n              element.turn_text = \"Soir\";\n            }\n          });\n          console.log(this.myActiveBookings);\n          console.log(\"Despues de recorrer una reserva\");\n\n          if (this.myActiveBookings.length == 0) {\n            this.haveActiveBookings = false;\n          } else {\n            this.haveActiveBookings = true;\n          }\n\n          this.myActiveBookings = this.myActiveBookings.sort(function (a, b) {\n            return b.id - a.id;\n          });\n        }, error => {\n          this.toastService.presentToast('Problème de réseau.');\n        });\n        console.log(this.myActiveBookings);\n        console.log(\"Despues de obtener las reservas.\");\n      });\n    }\n\n    getLastBookingsUserBusiness() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.postData.id_user = window.localStorage.getItem('id_user');\n        this.authService.getLastBookingsUserBusiness(this.postData).subscribe(res => {\n          this.myLastBookings = res;\n\n          if (this.myLastBookings) {\n            if (this.myLastBookings.length == 0) {\n              this.haveLastBookings = false;\n            } else {\n              this.haveLastBookings = true;\n            }\n          }\n        }, error => {\n          this.toastService.presentToast('Problème de réseau.');\n        });\n      });\n    }\n\n    viewPetition(item) {\n      this.alertController.create({\n        mode: 'ios',\n        header: 'Nouvelle demande de réservation',\n        subHeader: 'Voulez-vous accepter la réservation de ce client ?',\n        buttons: [{\n          text: 'Non',\n          handler: data => {\n            this.cancelPetition(item);\n          }\n        }, {\n          text: 'Oui',\n          handler: data => {\n            //CREAR PETICION\n            this.acceptPetition(item);\n          }\n        }]\n      }).then(res => {\n        res.present();\n      });\n    }\n\n    acceptPetition(item) {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.postPetition.id_petition = item.id;\n        this.authService.acceptPetition(this.postPetition).subscribe(res => {\n          this.getBookingsForBusinessUser();\n          this.getBookingPetitions();\n        }, error => {});\n      });\n    }\n\n    cancelPetition(item) {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.postPetition.id_petition = item.id;\n        this.authService.cancelPetition(this.postPetition).subscribe(res => {\n          this.getBookingsForBusinessUser();\n          this.getBookingPetitions();\n        }, error => {});\n      });\n    }\n\n    goToPanel() {\n      this.safariViewController.isAvailable().then(available => {\n        if (available) {\n          this.safariViewController.show({\n            url: 'https://panel.booktable.app/admin/',\n            hidden: false,\n            animated: false,\n            transition: 'curl',\n            enterReaderModeIfAvailable: true,\n            tintColor: '#00ba5c'\n          }).subscribe(result => {\n            if (result.event === 'opened') console.log('Opened');else if (result.event === 'loaded') console.log('Loaded');else if (result.event === 'closed') console.log('Closed');\n          }, error => console.error(error));\n        } else {\n          // Opening a URL and returning an InAppBrowserObject\n          const browser = this.inAppBrowser.create('https://panel.booktable.app/admin/', '_system', 'location=yes');\n        }\n      });\n    }\n\n  }\n\n  BookingSystemPage.ɵfac = function BookingSystemPage_Factory(t) {\n    return new (t || BookingSystemPage)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ToastService), i0.ɵɵdirectiveInject(i3.AlertController), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i3.Platform), i0.ɵɵdirectiveInject(i5.SafariViewController), i0.ɵɵdirectiveInject(i6.InAppBrowser));\n  };\n\n  BookingSystemPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookingSystemPage,\n    selectors: [[\"app-booking-system\"]],\n    decls: 17,\n    vars: 8,\n    consts: [[\"src\", \"assets/resources/logo_letters.svg\", 1, \"smallLogo\"], [1, \"ion-justify-content-center\"], [\"size\", \"11\", 4, \"ngIf\"], [\"size\", \"12\", 4, \"ngIf\"], [\"size\", \"11\"], [\"expand\", \"block\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"click\"], [\"size\", \"12\"], [\"class\", \"item-booking-disabled\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"item-booking-pasada\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"item-booking-inactive\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"item-booking-active\", 3, \"click\", 4, \"ngIf\"], [1, \"item-booking-disabled\", 3, \"click\"], [1, \"ion-text-wrap\"], [1, \"item-booking-pasada\", 3, \"click\"], [1, \"item-booking-inactive\", 3, \"click\"], [1, \"item-booking-active\", 3, \"click\"], [\"expand\", \"block\", 3, \"click\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"bold-text\"], [\"name\", \"restaurant-outline\", \"slot\", \"end\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function BookingSystemPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\");\n        i0.ɵɵelement(2, \"img\", 0);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(3, \"ion-content\")(4, \"ion-grid\")(5, \"ion-row\", 1);\n        i0.ɵɵtemplate(6, BookingSystemPage_ion_col_6_Template, 4, 0, \"ion-col\", 2);\n        i0.ɵɵtemplate(7, BookingSystemPage_ion_col_7_Template, 6, 0, \"ion-col\", 2);\n        i0.ɵɵtemplate(8, BookingSystemPage_ion_col_8_Template, 6, 0, \"ion-col\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ion-row\", 1);\n        i0.ɵɵtemplate(10, BookingSystemPage_ion_col_10_Template, 15, 4, \"ion-col\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"ion-row\", 1)(12, \"ion-col\", 4);\n        i0.ɵɵtemplate(13, BookingSystemPage_ion_button_13_Template, 2, 0, \"ion-button\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(14, BookingSystemPage_ion_grid_14_Template, 6, 0, \"ion-grid\", 6);\n        i0.ɵɵtemplate(15, BookingSystemPage_ion_grid_15_Template, 5, 1, \"ion-grid\", 6);\n        i0.ɵɵtemplate(16, BookingSystemPage_ion_grid_16_Template, 9, 1, \"ion-grid\", 6);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.havePaymentMethod == 3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.havePaymentMethod == 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.havePaymentMethod == 1);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.havePaymentMethod == 3);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.havePaymentMethod == 3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.haveActivePetitions);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.haveActivePetitions);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.haveLastBookings);\n      }\n    },\n    dependencies: [i7.NgForOf, i7.NgIf, i3.IonButton, i3.IonCol, i3.IonContent, i3.IonGrid, i3.IonHeader, i3.IonIcon, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonListHeader, i3.IonRow, i3.IonToolbar, i7.DatePipe],\n    styles: [\"ion-toolbar[_ngcontent-%COMP%]{text-align:center;margin:0 auto;--background: #1C2129}ion-title[_ngcontent-%COMP%]{color:#fff}ion-content[_ngcontent-%COMP%]{--background:#fff}ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:16px}.smallLogo[_ngcontent-%COMP%]{width:135px;text-align:center;margin:15px}.title-page[_ngcontent-%COMP%]{text-align:center}.icons-green[_ngcontent-%COMP%]{color:#00ba5c;font-size:30px}.label-wishlist[_ngcontent-%COMP%]{margin:4px}.profile-button[_ngcontent-%COMP%]{position:absolute;color:#fff;right:10px}.profile-icon[_ngcontent-%COMP%]{font-size:24px}.item-booking-inactive[_ngcontent-%COMP%]{--background: blanchedalmond;font-size:.7rem}.item-booking-active[_ngcontent-%COMP%]{--background: lightgreen;font-size:.7rem}.item-booking-disabled[_ngcontent-%COMP%]{--background: gray;color:#fff;font-size:.7rem}.item-booking-pasada[_ngcontent-%COMP%]{--background: #fc5a5a;font-size:.7rem;display:none}.bold-text[_ngcontent-%COMP%]{font-weight:700}hr[_ngcontent-%COMP%]{background:black!important}.table[_ngcontent-%COMP%]{--ion-grid-column-padding: 10px;border-collapse:collapse;border-style:hidden}.table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child{background-color:#1c2129;font-weight:700;color:#fff}.table[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border:1px solid black;border-bottom:0;border-right:0}.table[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{border-right:1px solid black}.table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:last-child{border-bottom:1px solid black}\"]\n  });\n  return BookingSystemPage;\n})();","map":null,"metadata":{},"sourceType":"module"}