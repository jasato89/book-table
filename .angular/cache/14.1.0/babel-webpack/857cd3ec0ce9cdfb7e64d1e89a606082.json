{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nimport { trigger, state, style, animate, transition } from '@angular/animations';\nlet AnimatedLikeComponent = class AnimatedLikeComponent {\n  constructor(authService, toastService) {\n    this.authService = authService;\n    this.toastService = toastService;\n    this.postData = {\n      id_user: '',\n      id_rest: ''\n    };\n  }\n\n  ngOnInit() {\n    this.getState();\n  }\n\n  ionViewDidLeave() {}\n\n  ngOnDestroy() {\n    this.postData = null;\n    this.likeState = null;\n    this.iconName = null;\n  }\n\n  getState() {\n    if (this.like) {\n      this.likeState = 'liked';\n      this.iconName = \"assets/icon/heart_green.svg\";\n    } else {\n      this.likeState = 'unliked';\n      this.iconName = \"assets/icon/heart_empty.svg\";\n    }\n  }\n\n  getStatePetition() {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.postData = {\n        id_rest: this.id_rest,\n        id_user: window.localStorage.getItem('id_user')\n      };\n      this.authService.getOneLike(this.postData).subscribe(res => {\n        if (res) {\n          this.likeState = 'liked';\n          this.iconName = \"assets/icon/heart_green.svg\";\n        } else {\n          this.likeState = 'unliked';\n          this.iconName = \"assets/icon/heart_empty.svg\";\n        }\n      }, error => {\n        this.toastService.presentToast('Problème de réseau.');\n      });\n    });\n  }\n\n  setLike() {\n    this.postData = {\n      id_rest: this.id_rest,\n      id_user: window.localStorage.getItem('id_user')\n    };\n    this.authService.setLikeRestaurant(this.postData).subscribe(res => {\n      if (res) {\n        this.toastService.presentToast('Ajouté aux favoris');\n      } else {\n        this.toastService.presentToast('Retiré de vos envies. ☹️');\n      }\n    }, error => {\n      this.toastService.presentToast('Problème de réseau.');\n    });\n  }\n\n  toggleLikeState() {\n    this.setLike();\n\n    if (this.likeState == 'unliked') {\n      this.likeState = 'liked';\n      this.iconName = \"assets/icon/heart_green.svg\";\n    } else {\n      this.likeState = 'unliked';\n      this.iconName = \"assets/icon/heart_empty.svg\";\n    }\n  }\n\n};\n\n__decorate([Input()], AnimatedLikeComponent.prototype, \"id_rest\", void 0);\n\n__decorate([Input()], AnimatedLikeComponent.prototype, \"like\", void 0);\n\nAnimatedLikeComponent = __decorate([Component({\n  selector: 'app-animated-like',\n  templateUrl: './animated-like.component.html',\n  styleUrls: ['./animated-like.component.scss'],\n  animations: [trigger('heart', [state('unliked', style({\n    color: '#fff',\n    opacity: '0.8',\n    transform: 'scale(1)'\n  })), state('liked', style({\n    color: '#e74c3c',\n    opacity: '1',\n    transform: 'scale(1.1)'\n  })), transition('unliked <=> liked', animate('100ms ease-out'))])]\n})], AnimatedLikeComponent);\nexport { AnimatedLikeComponent };","map":null,"metadata":{},"sourceType":"module"}